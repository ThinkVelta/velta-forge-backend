# Agents Guide

{{ project_name }}: {{ project_description }}

This repository hosts a containerized developer experience, with `uv`-based dependency management,
and automations for linting, testing, and packaging.

## Project layout

Key files and directories in the generated project include:

- `.devcontainer/` builds the VS Code Dev Container, aligning local tooling with CI.
- `.github/workflows/` contains the automation pipelines:
  - `test.yml` runs the lint and test matrix.
  - `summary.yml` aggregates workflow results into a PR summary comment (`main` <- `dev`).
  - `pr.yml` executes a Codex-backed analysis on pull requests (`dev` <- `<feature-branch>`).
  {%- if project_type == 'app' %}
  - `deploy.yml` publishes the application image.
  {%- endif %}
  {%- if project_type == 'package' %}
  - `publish.yml` builds and uploads the package to the configured index.
  {%- endif %}
- `Dockerfile` and `docker-compose.yml` orchestrate local services for development.
- `pyproject.toml` and `uv.lock` declare runtime and development dependencies.
- `src/{{ project_name_snake_case }}/` holds the project's {%- if project_type == 'app' %}application {%- endif %}{%- if project_type == 'package' %}package {%- endif %}code.
  {%- if with_fastapi_api %}
  - `src/{{ project_name_snake_case }}_api/` contains the FastAPI application, including `main.py` with the `/health` endpoint and
    `basemodels.py` with the supporting Pydantic schemas.
  {%- endif %}
- `tests/` contains pytest-based regression tests.
- `poe` tasks in `pyproject.toml` wrap common workflows like serving, linting, and testing.
- `CHANGELOG.md` documents release history following Conventional Commits.

## Coding best practices

- Target Python {{ python_version }} syntax with full type hints and NumPy-style docstrings.
- Keep functions small, expressive, and side-effect free. Prefer dependency injection over globals.
- Follow the configured Ruff rules (100 character lines, absolute imports, strict warnings). Run
  `uv run poe lint` to autoformat and validate style before opening a pull request.
- Maintain exhaustive automated coverage by updating `tests/` alongside code changes.
- When extending FastAPI modules, keep response models in `basemodels.py` and reuse shared schemas
  where practical.

## Notes for AI agents

- Add new dependencies via `uv add` (or `uv add --dev` for development requirements) so `uv.lock`
  stays in sync.
- Respect the public API exported from `src/{{ project_name_snake_case }}/__init__.py` when adding
  new modules.
- *IMPORTANT:* Run `uv run poe lint` and `uv run poe test` before finishing your changes to ensure 
  code style and regression tests pass.
- Preserve compatibility with existing Pydantic models and pytest fixtures.
- Prefer meaningful commit messages that follow the Conventional Commits specification.
- Analyze the codebase thoroughly for existing code that might help solve your problem, to keep
  reusability of components high.
